const chordData = {
  "Cmaj7": ["C", "E", "G", "B"],
  "Cm7": ["C", "Eb", "G", "Bb"],
  "C7": ["C", "E", "G", "Bb"],
  "Cm7b5": ["C", "Eb", "Gb", "Bb"],
  "Cdim7": ["C", "Eb", "Gb", "A"],

  "C#maj7": ["C#", "F", "G#", "C"],
  "C#m7": ["C#", "E", "G#", "B"],
  "C#7": ["C#", "F", "G#", "B"],
  "C#m7b5": ["C#", "E", "G", "B"],
  "C#dim7": ["C#", "E", "G", "Bb"],

  "Dbmaj7": ["Db", "F", "Ab", "C"],
  "Dbm7": ["Db", "E", "Ab", "B"],
  "Db7": ["Db", "F", "Ab", "B"],
  "Dbm7b5": ["Db", "E", "G", "B"],
  "Dbdim7": ["Db", "E", "G", "Bb"],

  "Dmaj7": ["D", "F#", "A", "C#"],
  "Dm7": ["D", "F", "A", "C"],
  "D7": ["D", "F#", "A", "C"],
  "Dm7b5": ["D", "F", "Ab", "C"],
  "Ddim7": ["D", "F", "Ab", "B"],

  "D#maj7": ["D#", "G", "A#", "D"],
  "D#m7": ["D#", "F#", "A#", "C#"],
  "D#7": ["D#", "G", "A#", "C#"],
  "D#m7b5": ["D#", "F#", "A", "C#"],
  "D#dim7": ["D#", "F#", "A", "C"],

  "Ebmaj7": ["Eb", "G", "Bb", "D"],
  "Ebm7": ["Eb", "Gb", "Bb", "Db"],
  "Eb7": ["Eb", "G", "Bb", "Db"],
  "Ebm7b5": ["Eb", "Gb", "A", "Db"],
  "Ebdim7": ["Eb", "Gb", "A", "C"],

  "Emaj7": ["E", "G#", "B", "D#"],
  "Em7": ["E", "G", "B", "D"],
  "E7": ["E", "G#", "B", "D"],
  "Em7b5": ["E", "G", "Bb", "D"],
  "Edim7": ["E", "G", "Bb", "C#"],

  "Fmaj7": ["F", "A", "C", "E"],
  "Fm7": ["F", "Ab", "C", "Eb"],
  "F7": ["F", "A", "C", "Eb"],
  "Fm7b5": ["F", "Ab", "Cb", "Eb"],
  "Fdim7": ["F", "Ab", "Cb", "D"],

  "F#maj7": ["F#", "A#", "C#", "F"],
  "F#m7": ["F#", "A", "C#", "E"],
  "F#7": ["F#", "A#", "C#", "E"],
  "F#m7b5": ["F#", "A", "C", "E"],
  "F#dim7": ["F#", "A", "C", "Eb"],

  "Gbmaj7": ["Gb", "Bb", "Db", "F"],
  "Gbm7": ["Gb", "A", "Db", "E"],
  "Gb7": ["Gb", "Bb", "Db", "E"],
  "Gbm7b5": ["Gb", "A", "C", "E"],
  "Gbdim7": ["Gb", "A", "C", "Eb"],

  "Gmaj7": ["G", "B", "D", "F#"],
  "Gm7": ["G", "Bb", "D", "F"],
  "G7": ["G", "B", "D", "F"],
  "Gm7b5": ["G", "Bb", "Db", "F"],
  "Gdim7": ["G", "Bb", "Db", "E"],

  "Abmaj7": ["Ab", "C", "Eb", "G"],
  "Abm7": ["Ab", "Cb", "Eb", "Gb"],
  "Ab7": ["Ab", "C", "Eb", "Gb"],
  "Abm7b5": ["Ab", "Cb", "E", "Gb"],
  "Abdim7": ["Ab", "Cb", "E", "Gbb"],

  "Amaj7": ["A", "C#", "E", "G#"],
  "Am7": ["A", "C", "E", "G"],
  "A7": ["A", "C#", "E", "G"],
  "Am7b5": ["A", "C", "Eb", "G"],
  "Adim7": ["A", "C", "Eb", "F#"],

  "A#maj7": ["A#", "D", "F#", "A"],
  "A#m7": ["A#", "C#", "F", "G#"],
  "A#7": ["A#", "D", "F#", "G#"],
  "A#m7b5": ["A#", "C#", "E", "G#"],
  "A#dim7": ["A#", "C#", "E", "G"],

  "Bbmaj7": ["Bb", "D", "F", "A"],
  "Bbm7": ["Bb", "Db", "F", "Ab"],
  "Bb7": ["Bb", "D", "F", "Ab"],
  "Bbm7b5": ["Bb", "Db", "E", "Ab"],
  "Bbdim7": ["Bb", "Db", "E", "G"],

  "Bmaj7": ["B", "D#", "F#", "A#"],
  "Bm7": ["B", "D", "F#", "A"],
  "B7": ["B", "D#", "F#", "A"],
  "Bm7b5": ["B", "D", "F", "A"],
  "Bdim7": ["B", "D", "F", "Ab"]
}

const NUM_NOTES = 4
const App = function(root, data) {

	const state = {
		data,
		currentChord: getChord(),
		orientation: 'START'
	}


	function getChord() {

		const index = Math.floor(Math.random() * 100) % Object.keys(data).length;
		const chordNames = Object.keys(data);
		const chordName = chordNames[index];
		
		return {
			notes: data[chordName],
			name: chordName
		}
	}

	function nextChord() {
		return this.getChord()
	}

	return {
		root,
		state,
		getChord,
		nextChord,
		started: false
	}

}

const root = document.getElementById('app-container');
const app = App(root, chordData);

function flipCard(element, text) {
	element.classList.toggle('flipped')
}

function setCard(element, text) {
	app.started = true;
	element.innerHTML = text;
}

root.addEventListener('click', function (e) {


	if (app.state.orientation === 'START') {

		app.state.orientation = 'FRONT'
		setCard(e.target, app.state.currentChord.name) 

	} else if (app.state.orientation == 'FRONT') {

		// update app state
		app.state.orientation = 'BACK'

		// update ui
		flipCard(e.target); 
		setCard(e.target, app.state.currentChord.notes) 


	} else if  (app.state.orientation == 'BACK') {

		// update app state: advance chord and flip card to front
		app.state.currentChord = app.getChord();
		app.state.orientation = 'FRONT'

		// update ui
		flipCard(e.target); 
		setCard(e.target, app.state.currentChord.name)

		

	}


})

